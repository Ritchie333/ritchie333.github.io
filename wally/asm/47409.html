<!DOCTYPE html>
<html>
<head>
<title>Everyone's A Wally: Routine at B931</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Everyone's A Wally</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="47362.html">B902</a>
</td>
<td class="up">Up: <a href="../maps/all.html#47409">Map</a></td>
<td class="next">
Next: <a href="47441.html">B951</a>
</td>
</tr>
</table>
<div class="description">B931: Clear the top status bar</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="58365.html">E3FD</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="47409"></span>B931</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="3">Preserve main registers.</td>
</tr>
<tr>
<td class="address-1"><span id="47410"></span>B932</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="address-1"><span id="47411"></span>B933</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="address-1"><span id="47412"></span>B934</td>
<td class="instruction">LD IX,$81F8</td>
<td class="comment-1" rowspan="1">Point <span class="register">IX</span> at the table for status bar screen offsets.</td>
</tr>
<tr>
<td class="address-1"><span id="47416"></span>B938</td>
<td class="instruction">LD C,$20</td>
<td class="comment-1" rowspan="1">20 rows to clear.</td>
</tr>
<tr>
<td class="address-2"><span id="47418"></span>B93A</td>
<td class="instruction">LD L,(IX+$00)</td>
<td class="comment-1" rowspan="2">Put the address in <span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="47421"></span>B93D</td>
<td class="instruction">LD H,(IX+$01)</td>
</tr>
<tr>
<td class="address-1"><span id="47424"></span>B940</td>
<td class="instruction">LD B,$20</td>
<td class="comment-1" rowspan="4">Clear the next row.</td>
</tr>
<tr>
<td class="address-2"><span id="47426"></span>B942</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="address-1"><span id="47428"></span>B944</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="47429"></span>B945</td>
<td class="instruction">DJNZ $B942</td>
</tr>
<tr>
<td class="address-1"><span id="47431"></span>B947</td>
<td class="instruction">INC IX</td>
<td class="comment-1" rowspan="2">Move to the next place in the table.</td>
</tr>
<tr>
<td class="address-1"><span id="47433"></span>B949</td>
<td class="instruction">INC IX</td>
</tr>
<tr>
<td class="address-1"><span id="47435"></span>B94B</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="2">Loop while there are more rows to handle.</td>
</tr>
<tr>
<td class="address-1"><span id="47436"></span>B94C</td>
<td class="instruction">JR NZ,$B93A</td>
</tr>
<tr>
<td class="address-1"><span id="47438"></span>B94E</td>
<td class="instruction">JP <a href="47362.html#47405">$B92D</a></td>
<td class="comment-1" rowspan="1">Jump back to restore main registers and return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="47362.html">B902</a>
</td>
<td class="up">Up: <a href="../maps/all.html#47409">Map</a></td>
<td class="next">
Next: <a href="47441.html">B951</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">(c) 1985 Mikro-Gen (code and graphics), 2013-2023 Ritchie Swann (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
</footer>
</body>
</html>