<!DOCTYPE html>
<html>
<head>
<title>Technician Ted: Routine at 5E32</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Loading system-Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Technician Ted</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="24073.html">5E09</a>
</td>
<td class="up">Up: <a href="Loading system.html#24114">Map</a></td>
<td class="next">
Next: <a href="24137.html">5E49</a>
</td>
</tr>
</table>
<div class="description">5E32: Write the attributes for the loading display</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="24341.html">5F15</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="24114"></span>5E32</td>
<td class="instruction">LD C,$0C</td>
<td class="comment-1" rowspan="1">Number of 2-line strips to colour in</td>
</tr>
<tr>
<td class="address-1"><span id="24116"></span>5E34</td>
<td class="instruction">LD DE,#R$5E49</td>
<td class="comment-1" rowspan="1">Holds the colours to put on screen</td>
</tr>
<tr>
<td class="address-1"><span id="24119"></span>5E37</td>
<td class="instruction">LD HL,$5800</td>
<td class="comment-1" rowspan="1">Holds destination address in attribute buffer</td>
</tr>
<tr>
<td class="address-2"><span id="24122"></span>5E3A</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1">Get the next colour byte</td>
</tr>
<tr>
<td class="address-1"><span id="24123"></span>5E3B</td>
<td class="instruction">LD B,$40</td>
<td class="comment-1" rowspan="1">Fill it for the next 40 bytes</td>
</tr>
<tr>
<td class="address-2"><span id="24125"></span>5E3D</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Set the value</td>
</tr>
<tr>
<td class="address-1"><span id="24126"></span>5E3E</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Next byte</td>
</tr>
<tr>
<td class="address-1"><span id="24127"></span>5E3F</td>
<td class="instruction">DJNZ $5E3D</td>
<td class="comment-1" rowspan="1">Repeat until done</td>
</tr>
<tr>
<td class="address-1"><span id="24129"></span>5E41</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="2">Next set of colours</td>
</tr>
<tr>
<td class="address-1"><span id="24130"></span>5E42</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="address-1"><span id="24131"></span>5E43</td>
<td class="instruction">JR NZ,$5E3A</td>
<td class="comment-1" rowspan="1">Loop back round if we haven't finished</td>
</tr>
<tr>
<td class="address-1"><span id="24133"></span>5E45</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Make the border black</td>
</tr>
<tr>
<td class="address-1"><span id="24134"></span>5E46</td>
<td class="instruction">OUT ($FE),A</td>
</tr>
<tr>
<td class="address-1"><span id="24136"></span>5E48</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="24073.html">5E09</a>
</td>
<td class="up">Up: <a href="Loading system.html#24114">Map</a></td>
<td class="next">
Next: <a href="24137.html">5E49</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">Copyright Steve Marsden and David Cooke 1984. This dissassembly by Ritchie Swann 2018.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
</footer>
</body>
</html>