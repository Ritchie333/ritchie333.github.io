<!DOCTYPE html>
<html>
<head>
<title>Dynamite Dan: Routine at E644</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Dynamite Dan</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58927.html">E62F</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58948">Map</a></td>
<td class="next">
Next: <a href="58978.html">E662</a>
</td>
</tr>
</table>
<div class="description">E644: Launch the blimp</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="58927.html">E62F</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58948"></span>E644</td>
<td class="instruction">CALL <a href="59670.html">$E916</a></td>
<td class="comment-1" rowspan="1">Update the blimp.</td>
</tr>
<tr>
<td class="address-1"><span id="58951"></span>E647</td>
<td class="instruction">LD A,($C87E)</td>
<td class="comment-1" rowspan="1">Get the game flags. (<a href="51326.html">C87E</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="58954"></span>E64A</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="1">Ensure bits 1 - 3 are set.</td>
</tr>
<tr>
<td class="address-1"><span id="58956"></span>E64C</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if not.</td>
</tr>
<tr>
<td class="address-1"><span id="58957"></span>E64D</td>
<td class="instruction">LD HL,$5820</td>
<td class="comment-1" rowspan="4">Scroll the attributes up one row.</td>
</tr>
<tr>
<td class="address-1"><span id="58960"></span>E650</td>
<td class="instruction">LD DE,$5800</td>
</tr>
<tr>
<td class="address-1"><span id="58963"></span>E653</td>
<td class="instruction">LD BC,$00C0</td>
</tr>
<tr>
<td class="address-1"><span id="58966"></span>E656</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="58968"></span>E658</td>
<td class="instruction">LD HL,$C878</td>
<td class="comment-1" rowspan="1">Get the height landed.</td>
</tr>
<tr>
<td class="address-1"><span id="58971"></span>E65B</td>
<td class="instruction">LD A,$08</td>
<td class="comment-1" rowspan="3">If it's greater than 8, reset the machine.</td>
</tr>
<tr>
<td class="address-1"><span id="58973"></span>E65D</td>
<td class="instruction">CP (HL)</td>
</tr>
<tr>
<td class="address-1"><span id="58974"></span>E65E</td>
<td class="instruction">JP C,$0000</td>
</tr>
<tr>
<td class="address-1"><span id="58977"></span>E661</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Otherwise return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58927.html">E62F</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58948">Map</a></td>
<td class="next">
Next: <a href="58978.html">E662</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">Copyright Rod Bowkett / Mirrorsoft 1985. This dissassembly by Ritchie Swann 2019-2023.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
</footer>
</body>
</html>