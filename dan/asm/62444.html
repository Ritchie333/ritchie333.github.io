<!DOCTYPE html>
<html>
<head>
<title>Dynamite Dan: Routine at F3EC</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Dynamite Dan</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="62432.html">F3E0</a>
</td>
<td class="up">Up: <a href="../maps/all.html#62444">Map</a></td>
<td class="next">
Next: <a href="62480.html">F410</a>
</td>
</tr>
</table>
<div class="description">F3EC: Draw any special objects in the room</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="52157.html">CBBD</a>.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">B</td>
<td class="register-desc">Room number to check</td>
</tr>
<tr>
<td class="register">IX</td>
<td class="register-desc">Pointer to room data</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="62444"></span>F3EC</td>
<td class="instruction">LD A,(IX+$0B)</td>
<td class="comment-1" rowspan="1">Get bit flags for this room.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62447"></span>
<div class="comments">
<div class="paragraph">
Check for an oxygen tank.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="62447"></span>F3EF</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="1">Is bit 0 set?</td>
</tr>
<tr>
<td class="address-1"><span id="62449"></span>F3F1</td>
<td class="instruction">JR Z,$F3F7</td>
<td class="comment-1" rowspan="1">No, so skip this.</td>
</tr>
<tr>
<td class="address-1"><span id="62451"></span>F3F3</td>
<td class="instruction">LD C,$CD</td>
<td class="comment-1" rowspan="2">Draw an oxygen tank. (<a href="35329.html">8A01</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="62453"></span>F3F5</td>
<td class="instruction">JR $F404</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62455"></span>
<div class="comments">
<div class="paragraph">
Check for a bank card.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="62455"></span>F3F7</td>
<td class="instruction">BIT 1,A</td>
<td class="comment-1" rowspan="1">Is bit 1 set?</td>
</tr>
<tr>
<td class="address-1"><span id="62457"></span>F3F9</td>
<td class="instruction">JR Z,$F3FF</td>
<td class="comment-1" rowspan="1">No, so skip this.</td>
</tr>
<tr>
<td class="address-1"><span id="62459"></span>F3FB</td>
<td class="instruction">LD C,$CB</td>
<td class="comment-1" rowspan="2">Draw a bank card. (<a href="35271.html">89C7</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="62461"></span>F3FD</td>
<td class="instruction">JR $F404</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62463"></span>
<div class="comments">
<div class="paragraph">
Check for an aerosol.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="62463"></span>F3FF</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="1">Is bit 2 set?</td>
</tr>
<tr>
<td class="address-1"><span id="62465"></span>F401</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if not, there are no special objects here.</td>
</tr>
<tr>
<td class="address-1"><span id="62466"></span>F402</td>
<td class="instruction">LD C,$CC</td>
<td class="comment-1" rowspan="1">Otherwise draw aerosol. (<a href="35309.html">89ED</a>).</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62468"></span>
<div class="comments">
<div class="paragraph">
Now draw the object.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="62468"></span>F404</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="2">Get the special object location for this room.</td>
</tr>
<tr>
<td class="address-1"><span id="62469"></span>F405</td>
<td class="instruction">CALL <a href="62432.html">$F3E0</a></td>
</tr>
<tr>
<td class="address-1"><span id="62472"></span>F408</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="2">Convert the UDG type to a graphic address.</td>
</tr>
<tr>
<td class="address-1"><span id="62473"></span>F409</td>
<td class="instruction">CALL <a href="62419.html">$F3D3</a></td>
</tr>
<tr>
<td class="address-1"><span id="62476"></span>F40C</td>
<td class="instruction">CALL <a href="59470.html">$E84E</a></td>
<td class="comment-1" rowspan="2">Draw the object and return.</td>
</tr>
<tr>
<td class="address-1"><span id="62479"></span>F40F</td>
<td class="instruction">RET</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="62432.html">F3E0</a>
</td>
<td class="up">Up: <a href="../maps/all.html#62444">Map</a></td>
<td class="next">
Next: <a href="62480.html">F410</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">Copyright Rod Bowkett / Mirrorsoft 1985. This dissassembly by Ritchie Swann 2019-2023.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
</footer>
</body>
</html>