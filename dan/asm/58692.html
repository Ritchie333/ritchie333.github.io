<!DOCTYPE html>
<html>
<head>
<title>Dynamite Dan: Routine at E544</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Dynamite Dan</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58688.html">E540</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58692">Map</a></td>
<td class="next">
Next: <a href="58770.html">E592</a>
</td>
</tr>
</table>
<div class="description">E544: Display moving objects</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="52157.html">CBBD</a>.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">IX</td>
<td class="register-desc">Pointer to moving room data</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="58692"></span>E544</td>
<td class="instruction">LD L,(IX+$07)</td>
<td class="comment-1" rowspan="2">Get the pointer to moving object data and put it in <span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58695"></span>E547</td>
<td class="instruction">LD H,(IX+$08)</td>
</tr>
<tr>
<td class="address-1"><span id="58698"></span>E54A</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="2">Copy this to <span class="register">IY</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58699"></span>E54B</td>
<td class="instruction">POP IY</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58701"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="51803.html">CA5B</a>. Get the first object
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58701"></span>E54D</td>
<td class="instruction">LD A,(IY+$00)</td>
<td class="comment-1" rowspan="1">Get the first sprite ID.</td>
</tr>
<tr>
<td class="address-1"><span id="58704"></span>E550</td>
<td class="instruction">CALL <a href="54889.html">$D669</a></td>
<td class="comment-1" rowspan="1">Get the graphic for this and put it in <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58707"></span>E553</td>
<td class="instruction">LD HL,$DED8</td>
<td class="comment-1" rowspan="1">Set <span class="register">HL</span> to the first moving graphics buffer (<a href="57048.html">DED8</a>).</td>
</tr>
<tr>
<td class="address-1"><span id="58710"></span>E556</td>
<td class="instruction">CALL <a href="54903.html">$D677</a></td>
<td class="comment-1" rowspan="1">Copy the object.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58713"></span>
<div class="comments">
<div class="paragraph">
Get the second object
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="58713"></span>E559</td>
<td class="instruction">LD A,(IY+$01)</td>
<td class="comment-1" rowspan="1">Get the second sprite ID.</td>
</tr>
<tr>
<td class="address-1"><span id="58716"></span>E55C</td>
<td class="instruction">CALL <a href="54889.html">$D669</a></td>
<td class="comment-1" rowspan="1">Get the graphic for this and put it in <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58719"></span>E55F</td>
<td class="instruction">LD HL,$DFCA</td>
<td class="comment-1" rowspan="1">Set <span class="register">HL</span> to the second moving graphics buffer (<a href="57048.html">DED8</a>).</td>
</tr>
<tr>
<td class="address-1"><span id="58722"></span>E562</td>
<td class="instruction">CALL <a href="54903.html">$D677</a></td>
<td class="comment-1" rowspan="1">Copy the object.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58725"></span>
<div class="comments">
<div class="paragraph">
Get the third object
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="58725"></span>E565</td>
<td class="instruction">LD A,(IY+$02)</td>
<td class="comment-1" rowspan="1">Get the third sprite ID.</td>
</tr>
<tr>
<td class="address-1"><span id="58728"></span>E568</td>
<td class="instruction">CALL <a href="54889.html">$D669</a></td>
<td class="comment-1" rowspan="1">Get the graphic for this and put it in <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58731"></span>E56B</td>
<td class="instruction">LD HL,$E0BC</td>
<td class="comment-1" rowspan="1">Set <span class="register">HL</span> to the third moving graphics buffer (<a href="57048.html">DED8</a>).</td>
</tr>
<tr>
<td class="address-1"><span id="58734"></span>E56E</td>
<td class="instruction">CALL <a href="55317.html">$D815</a></td>
<td class="comment-1" rowspan="1">Copy the object.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58737"></span>
<div class="comments">
<div class="paragraph">
Get the fourth object
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="58737"></span>E571</td>
<td class="instruction">LD A,(IY+$03)</td>
<td class="comment-1" rowspan="1">Get the fourth sprite ID.</td>
</tr>
<tr>
<td class="address-1"><span id="58740"></span>E574</td>
<td class="instruction">CALL <a href="54889.html">$D669</a></td>
<td class="comment-1" rowspan="1">Get the graphic for this and put it in <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58743"></span>E577</td>
<td class="instruction">LD HL,$E2FE</td>
<td class="comment-1" rowspan="1">Set <span class="register">HL</span> to the fourth moving graphics buffer (<a href="57048.html">DED8</a>).</td>
</tr>
<tr>
<td class="address-1"><span id="58746"></span>E57A</td>
<td class="instruction">CALL <a href="55317.html">$D815</a></td>
<td class="comment-1" rowspan="1">Copy the object.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58749"></span>
<div class="comments">
<div class="paragraph">
Now get the instances of each object.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="58749"></span>E57D</td>
<td class="instruction">LD A,(IY+$04)</td>
<td class="comment-1" rowspan="1">Load the first byte.</td>
</tr>
<tr>
<td class="address-1"><span id="58752"></span>E580</td>
<td class="instruction">CALL <a href="59896.html">$E9F8</a></td>
<td class="comment-1" rowspan="1">Convert into two bytes in <span class="register">BC</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58755"></span>E583</td>
<td class="instruction">LD ($E540),BC</td>
<td class="comment-1" rowspan="1">Store this in <a href="58688.html">E540</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58759"></span>E587</td>
<td class="instruction">LD A,(IY+$05)</td>
<td class="comment-1" rowspan="1">Load the second byte.</td>
</tr>
<tr>
<td class="address-1"><span id="58762"></span>E58A</td>
<td class="instruction">CALL <a href="59896.html">$E9F8</a></td>
<td class="comment-1" rowspan="1">Convert into two bytes in <span class="register">BC</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58765"></span>E58D</td>
<td class="instruction">LD ($E542),BC</td>
<td class="comment-1" rowspan="1">Store this in <a href="58688.html">E540</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58769"></span>E591</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58688.html">E540</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58692">Map</a></td>
<td class="next">
Next: <a href="58770.html">E592</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">Copyright Rod Bowkett / Mirrorsoft 1985. This dissassembly by Ritchie Swann 2019-2023.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
</footer>
</body>
</html>