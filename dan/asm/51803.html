<!DOCTYPE html>
<html>
<head>
<title>Dynamite Dan: Routine at CA5B</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Dynamite Dan</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="51802.html">CA5A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#51803">Map</a></td>
<td class="next">
Next: <a href="52109.html">CB8D</a>
</td>
</tr>
</table>
<div class="description">CA5B: Display the intro screen and wait for the game to start</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="51200.html">C800</a> and <a href="56566.html">DCF6</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="51803"></span>CA5B</td>
<td class="instruction">CALL <a href="59393.html">$E801</a></td>
<td class="comment-1" rowspan="1">Clear the screen.</td>
</tr>
<tr>
<td class="address-1"><span id="51806"></span>CA5E</td>
<td class="instruction">LD HL,$EFBC</td>
<td class="comment-1" rowspan="2">Print the intro screen UDGS. (<a href="61372.html">EFBC</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="51809"></span>CA61</td>
<td class="instruction">CALL <a href="60678.html">$ED06</a></td>
</tr>
<tr>
<td class="address-1"><span id="51812"></span>CA64</td>
<td class="instruction">LD HL,$EC26</td>
<td class="comment-1" rowspan="2">Print the intro text. (<a href="60454.html">EC26</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="51815"></span>CA67</td>
<td class="instruction">CALL <a href="61169.html">$EEF1</a></td>
</tr>
<tr>
<td class="address-1"><span id="51818"></span>CA6A</td>
<td class="instruction">LD DE,$0A07</td>
<td class="comment-1" rowspan="1">Start at location 0A , 07.</td>
</tr>
<tr>
<td class="address-1"><span id="51821"></span>CA6D</td>
<td class="instruction">LD A,$02</td>
<td class="comment-1" rowspan="1">Start by drawing red on black.</td>
</tr>
<tr>
<td class="address-2"><span id="51823"></span>CA6F</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="2">Store <span class="register">DE</span> and <span class="register">AF</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="51824"></span>CA70</td>
<td class="instruction">PUSH AF</td>
</tr>
<tr>
<td class="address-1"><span id="51825"></span>CA71</td>
<td class="instruction">LD BC,$0E01</td>
<td class="comment-1" rowspan="2">Fill 00E columns and 1 row with this attribute.</td>
</tr>
<tr>
<td class="address-1"><span id="51828"></span>CA74</td>
<td class="instruction">CALL <a href="59578.html">$E8BA</a></td>
</tr>
<tr>
<td class="address-1"><span id="51831"></span>CA77</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="2">Restore <span class="register">AF</span> and <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="51832"></span>CA78</td>
<td class="instruction">POP DE</td>
</tr>
<tr>
<td class="address-1"><span id="51833"></span>CA79</td>
<td class="instruction">INC E</td>
<td class="comment-1" rowspan="2">Move forward two columns.</td>
</tr>
<tr>
<td class="address-1"><span id="51834"></span>CA7A</td>
<td class="instruction">INC E</td>
</tr>
<tr>
<td class="address-1"><span id="51835"></span>CA7B</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Move to the next ink colour?</td>
</tr>
<tr>
<td class="address-1"><span id="51836"></span>CA7C</td>
<td class="instruction">CP $07</td>
<td class="comment-1" rowspan="1">Have we reached white yet?</td>
</tr>
<tr>
<td class="address-1"><span id="51838"></span>CA7E</td>
<td class="instruction">JR NZ,$CA6F</td>
<td class="comment-1" rowspan="1">No, so loop back and colour some more.</td>
</tr>
<tr>
<td class="address-1"><span id="51840"></span>CA80</td>
<td class="instruction">LD BC,$0012</td>
<td class="comment-1" rowspan="4">Copy the intro screen's attributes.</td>
</tr>
<tr>
<td class="address-1"><span id="51843"></span>CA83</td>
<td class="instruction">LD DE,$5867</td>
</tr>
<tr>
<td class="address-1"><span id="51846"></span>CA86</td>
<td class="instruction">LD HL,$CA2B</td>
</tr>
<tr>
<td class="address-1"><span id="51849"></span>CA89</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="51851"></span>CA8B</td>
<td class="instruction">LD HL,$DA8A</td>
<td class="comment-1" rowspan="2">Switch to playing a tune.</td>
</tr>
<tr>
<td class="address-1"><span id="51854"></span>CA8E</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="address-1"><span id="51856"></span>CA90</td>
<td class="instruction">LD IY,$CA3D</td>
<td class="comment-1" rowspan="1">Point <span class="register">IY</span> at the moving object data for the intro screen.</td>
</tr>
<tr>
<td class="address-1"><span id="51860"></span>CA94</td>
<td class="instruction">CALL <a href="58692.html#58701">$E54D</a></td>
<td class="comment-1" rowspan="1">Display moving objects, directly.</td>
</tr>
<tr>
<td class="address-1"><span id="51863"></span>CA97</td>
<td class="instruction">LD HL,$E6D9</td>
<td class="comment-1" rowspan="2">Set the laser tick count (<a href="59097.html">E6D9</a>) to 7F (fire next loop).</td>
</tr>
<tr>
<td class="address-1"><span id="51866"></span>CA9A</td>
<td class="instruction">LD (HL),$7F</td>
</tr>
<tr>
<td class="address-1"><span id="51868"></span>CA9C</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Default to drawing the last bolt in black.</td>
</tr>
<tr>
<td class="address-1"><span id="51869"></span>CA9D</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="address-1"><span id="51871"></span>CA9F</td>
<td class="instruction">LD HL,$EA05</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at the theme tune. (<a href="59909.html">EA05</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="51874"></span>CAA2</td>
<td class="instruction">LD ($CA57),HL</td>
<td class="comment-1" rowspan="1">Store it as the current one. (<a href="51799.html">CA57</a>).</td>
</tr>
<tr>
<td class="address-1"><span id="51877"></span>CAA5</td>
<td class="instruction">LD A,$12</td>
<td class="comment-1" rowspan="2">Set 12 blocks in the tune.</td>
</tr>
<tr>
<td class="address-1"><span id="51879"></span>CAA7</td>
<td class="instruction">LD ($CA59),A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="51882"></span>
<div class="comments">
<div class="paragraph">
Loop round the theme tune blocks and play them.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="51882"></span>CAAA</td>
<td class="instruction">LD HL,($CA57)</td>
<td class="comment-1" rowspan="1">Get the current theme tune block.</td>
</tr>
<tr>
<td class="address-1"><span id="51885"></span>CAAD</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="4">Load the pointer to the tune block into <span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="51886"></span>CAAE</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="51887"></span>CAAF</td>
<td class="instruction">LD H,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="51888"></span>CAB0</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="address-1"><span id="51889"></span>CAB1</td>
<td class="instruction">CALL <a href="56075.html">$DB0B</a></td>
<td class="comment-1" rowspan="1">Play the tune.</td>
</tr>
<tr>
<td class="address-2"><span id="51892"></span>CAB4</td>
<td class="instruction">LD A,$FD</td>
<td class="comment-1" rowspan="2">Scan for 'A' - 'G' on the keyboard.</td>
</tr>
<tr>
<td class="address-1"><span id="51894"></span>CAB6</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="address-1"><span id="51896"></span>CAB8</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="1">Was 'D' pressed?</td>
</tr>
<tr>
<td class="address-1"><span id="51898"></span>CABA</td>
<td class="instruction">JP Z,<a href="56163.html">$DB63</a></td>
<td class="comment-1" rowspan="1">If so, move forward to define the keys.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="51901"></span>
<div class="comments">
<div class="paragraph">
Move the sprites on screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="51901"></span>CABD</td>
<td class="instruction">LD IY,$CA43</td>
<td class="comment-1" rowspan="1">Point <span class="register">IY</span> at the moving object data for the intro screen.</td>
</tr>
<tr>
<td class="address-1"><span id="51905"></span>CAC1</td>
<td class="instruction">CALL <a href="58770.html#58783">$E59F</a></td>
<td class="comment-1" rowspan="1">Move the objects.</td>
</tr>
<tr>
<td class="address-1"><span id="51908"></span>CAC4</td>
<td class="instruction">CALL <a href="60834.html">$EDA2</a></td>
<td class="comment-1" rowspan="1">Rotate the colours on the main message.</td>
</tr>
<tr>
<td class="address-1"><span id="51911"></span>CAC7</td>
<td class="instruction">CALL <a href="55949.html">$DA8D</a></td>
<td class="comment-1" rowspan="1">Play a note of the tune.</td>
</tr>
<tr>
<td class="address-1"><span id="51914"></span>CACA</td>
<td class="instruction">CALL <a href="56058.html">$DAFA</a></td>
<td class="comment-1" rowspan="1">Pause for one second.</td>
</tr>
<tr>
<td class="address-1"><span id="51917"></span>CACD</td>
<td class="instruction">LD HL,($DA88)</td>
<td class="comment-1" rowspan="3">Have we reached the end of the tune block?</td>
</tr>
<tr>
<td class="address-1"><span id="51920"></span>CAD0</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="51921"></span>CAD1</td>
<td class="instruction">CP $FF</td>
</tr>
<tr>
<td class="address-1"><span id="51923"></span>CAD3</td>
<td class="instruction">JR NZ,$CAEE</td>
<td class="comment-1" rowspan="1">Jump forward if not.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="51925"></span>
<div class="comments">
<div class="paragraph">
Reached the end of this tune block, move to the next one.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="51925"></span>CAD5</td>
<td class="instruction">LD HL,($CA57)</td>
<td class="comment-1" rowspan="3">Move onto the next tune block. (<a href="51799.html">CA57</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="51928"></span>CAD8</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="51929"></span>CAD9</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="51930"></span>CADA</td>
<td class="instruction">LD A,($CA59)</td>
<td class="comment-1" rowspan="2">Decrement the number of blocks left to play.</td>
</tr>
<tr>
<td class="address-1"><span id="51933"></span>CADD</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="address-1"><span id="51934"></span>CADE</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Are there no blocks left?</td>
</tr>
<tr>
<td class="address-1"><span id="51935"></span>CADF</td>
<td class="instruction">JR NZ,$CAE6</td>
<td class="comment-1" rowspan="1">If there are, then jump forward.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="51937"></span>
<div class="comments">
<div class="paragraph">
Reached the end of all tune blocks, start the tune from the beginning.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="51937"></span>CAE1</td>
<td class="instruction">LD A,$12</td>
<td class="comment-1" rowspan="1">12 blocks left to play.</td>
</tr>
<tr>
<td class="address-1"><span id="51939"></span>CAE3</td>
<td class="instruction">LD HL,$EA05</td>
<td class="comment-1" rowspan="2">Point back to the first block.</td>
</tr>
<tr>
<td class="address-2"><span id="51942"></span>CAE6</td>
<td class="instruction">LD ($CA57),HL</td>
</tr>
<tr>
<td class="address-1"><span id="51945"></span>CAE9</td>
<td class="instruction">LD ($CA59),A</td>
<td class="comment-1" rowspan="1">Set the number of blocks.</td>
</tr>
<tr>
<td class="address-1"><span id="51948"></span>CAEC</td>
<td class="instruction">JR $CAAA</td>
<td class="comment-1" rowspan="1">Loop back to play more of the theme tune.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="51950"></span>
<div class="comments">
<div class="paragraph">
Flash the selected row on the title screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="51950"></span>CAEE</td>
<td class="instruction">LD A,($CA5A)</td>
<td class="comment-1" rowspan="2">Put the current row in <span class="register">E</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="51953"></span>CAF1</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="51954"></span>CAF2</td>
<td class="instruction">LD D,$0A</td>
<td class="comment-1" rowspan="1">Always starting at column 00A.</td>
</tr>
<tr>
<td class="address-1"><span id="51956"></span>CAF4</td>
<td class="instruction">CALL <a href="59619.html">$E8E3</a></td>
<td class="comment-1" rowspan="2">Get the attribute at this location and put it in <span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="51959"></span>CAF7</td>
<td class="instruction">EX DE,HL</td>
</tr>
<tr>
<td class="address-1"><span id="51960"></span>CAF8</td>
<td class="instruction">LD B,$0A</td>
<td class="comment-1" rowspan="1">Loop for 0A columns.</td>
</tr>
<tr>
<td class="address-2"><span id="51962"></span>CAFA</td>
<td class="instruction">SET 7,(HL)</td>
<td class="comment-1" rowspan="1">Set the flash bit.</td>
</tr>
<tr>
<td class="address-1"><span id="51964"></span>CAFC</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Move to the next column.</td>
</tr>
<tr>
<td class="address-1"><span id="51965"></span>CAFD</td>
<td class="instruction">DJNZ $CAFA</td>
<td class="comment-1" rowspan="1">Loop while there are more columns.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="51967"></span>
<div class="comments">
<div class="paragraph">
Detect Sinclair joystick.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="51967"></span>CAFF</td>
<td class="instruction">LD A,$FD</td>
<td class="comment-1" rowspan="2">Scan for 'A' - 'G' on the keyboard.</td>
</tr>
<tr>
<td class="address-1"><span id="51969"></span>CB01</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="address-1"><span id="51971"></span>CB03</td>
<td class="instruction">AND $02</td>
<td class="comment-1" rowspan="1">Was 'D' pressed?</td>
</tr>
<tr>
<td class="address-1"><span id="51973"></span>CB05</td>
<td class="instruction">JR NZ,$CB1E</td>
<td class="comment-1" rowspan="1">Move forward if not.</td>
</tr>
<tr>
<td class="address-1"><span id="51975"></span>CB07</td>
<td class="instruction">LD A,($CA5A)</td>
<td class="comment-1" rowspan="1">Get the currently selected row to flash.</td>
</tr>
<tr>
<td class="address-1"><span id="51978"></span>CB0A</td>
<td class="instruction">CP $0B</td>
<td class="comment-1" rowspan="1">Is it 00B?</td>
</tr>
<tr>
<td class="address-1"><span id="51980"></span>CB0C</td>
<td class="instruction">JR Z,$CAB4</td>
<td class="comment-1" rowspan="1">Jump back if is.</td>
</tr>
<tr>
<td class="address-1"><span id="51982"></span>CB0E</td>
<td class="instruction">CALL <a href="52109.html">$CB8D</a></td>
<td class="comment-1" rowspan="1">Otherwise change the option.</td>
</tr>
<tr>
<td class="address-1"><span id="51985"></span>CB11</td>
<td class="instruction">LD HL,$E9DB</td>
<td class="comment-1" rowspan="2">Change input to Sinclair joystick.</td>
</tr>
<tr>
<td class="address-1"><span id="51988"></span>CB14</td>
<td class="instruction">LD ($E9BA),HL</td>
</tr>
<tr>
<td class="address-1"><span id="51991"></span>CB17</td>
<td class="instruction">LD A,$0B</td>
<td class="comment-1" rowspan="2">Set 00B as the row to flash.</td>
</tr>
<tr>
<td class="address-2"><span id="51993"></span>CB19</td>
<td class="instruction">LD ($CA5A),A</td>
</tr>
<tr>
<td class="address-1"><span id="51996"></span>CB1C</td>
<td class="instruction">JR $CAB4</td>
<td class="comment-1" rowspan="1">Jump back.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="51998"></span>
<div class="comments">
<div class="paragraph">
Detect keyboard
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="51998"></span>CB1E</td>
<td class="instruction">LD A,$BF</td>
<td class="comment-1" rowspan="2">Scan for 'ENTER' - 'H' on the keyboard.</td>
</tr>
<tr>
<td class="address-1"><span id="52000"></span>CB20</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="address-1"><span id="52002"></span>CB22</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">Remember this in <span class="register">B</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="52003"></span>CB23</td>
<td class="instruction">AND $04</td>
<td class="comment-1" rowspan="1">Was 'K' pressed?</td>
</tr>
<tr>
<td class="address-1"><span id="52005"></span>CB25</td>
<td class="instruction">JR NZ,$CB3B</td>
<td class="comment-1" rowspan="1">Jump forward if not.</td>
</tr>
<tr>
<td class="address-1"><span id="52007"></span>CB27</td>
<td class="instruction">LD A,($CA5A)</td>
<td class="comment-1" rowspan="1">Get the currently selected row to flash.</td>
</tr>
<tr>
<td class="address-1"><span id="52010"></span>CB2A</td>
<td class="instruction">CP $07</td>
<td class="comment-1" rowspan="1">Is it 07?</td>
</tr>
<tr>
<td class="address-1"><span id="52012"></span>CB2C</td>
<td class="instruction">JR Z,$CAB4</td>
<td class="comment-1" rowspan="1">Jump back if it is.</td>
</tr>
<tr>
<td class="address-1"><span id="52014"></span>CB2E</td>
<td class="instruction">CALL <a href="52109.html">$CB8D</a></td>
<td class="comment-1" rowspan="1">Otherwise change the option.</td>
</tr>
<tr>
<td class="address-1"><span id="52017"></span>CB31</td>
<td class="instruction">LD HL,$F271</td>
<td class="comment-1" rowspan="2">Change input to keyboard.</td>
</tr>
<tr>
<td class="address-1"><span id="52020"></span>CB34</td>
<td class="instruction">LD ($E9BA),HL</td>
</tr>
<tr>
<td class="address-1"><span id="52023"></span>CB37</td>
<td class="instruction">LD A,$07</td>
<td class="comment-1" rowspan="2">Set 07 as the row to flash and jump back.</td>
</tr>
<tr>
<td class="address-1"><span id="52025"></span>CB39</td>
<td class="instruction">JR $CB19</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="52027"></span>
<div class="comments">
<div class="paragraph">
Detect Kempston joystick
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="52027"></span>CB3B</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1">Get the keys pressed earlier.</td>
</tr>
<tr>
<td class="address-1"><span id="52028"></span>CB3C</td>
<td class="instruction">AND $08</td>
<td class="comment-1" rowspan="1">Was 'J' pressed?</td>
</tr>
<tr>
<td class="address-1"><span id="52030"></span>CB3E</td>
<td class="instruction">JR NZ,$CB55</td>
<td class="comment-1" rowspan="1">Jump forward if not.</td>
</tr>
<tr>
<td class="address-1"><span id="52032"></span>CB40</td>
<td class="instruction">LD A,($CA5A)</td>
<td class="comment-1" rowspan="1">Get the currently selected row to flash.</td>
</tr>
<tr>
<td class="address-1"><span id="52035"></span>CB43</td>
<td class="instruction">CP $09</td>
<td class="comment-1" rowspan="1">Is it 09?</td>
</tr>
<tr>
<td class="address-1"><span id="52037"></span>CB45</td>
<td class="instruction">JP Z,$CAB4</td>
<td class="comment-1" rowspan="1">Jump back if it is.</td>
</tr>
<tr>
<td class="address-1"><span id="52040"></span>CB48</td>
<td class="instruction">CALL <a href="52109.html">$CB8D</a></td>
<td class="comment-1" rowspan="1">Otherwise change the option.</td>
</tr>
<tr>
<td class="address-1"><span id="52043"></span>CB4B</td>
<td class="instruction">LD HL,$E9C0</td>
<td class="comment-1" rowspan="2">Change input to Kempston joystick.</td>
</tr>
<tr>
<td class="address-1"><span id="52046"></span>CB4E</td>
<td class="instruction">LD ($E9BA),HL</td>
</tr>
<tr>
<td class="address-1"><span id="52049"></span>CB51</td>
<td class="instruction">LD A,$09</td>
<td class="comment-1" rowspan="2">Set 09 as the row to flash and jump back.</td>
</tr>
<tr>
<td class="address-1"><span id="52051"></span>CB53</td>
<td class="instruction">JR $CB19</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="52053"></span>
<div class="comments">
<div class="paragraph">
No change in input routine, check for another option.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="52053"></span>CB55</td>
<td class="instruction">LD A,$DF</td>
<td class="comment-1" rowspan="2">Scan 'P' - 'Y' on the keyboard.</td>
</tr>
<tr>
<td class="address-1"><span id="52055"></span>CB57</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="address-1"><span id="52057"></span>CB59</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="1">Was 'I' pressed?</td>
</tr>
<tr>
<td class="address-1"><span id="52059"></span>CB5B</td>
<td class="instruction">JP Z,<a href="56566.html">$DCF6</a></td>
<td class="comment-1" rowspan="1">If so, display the instructions.</td>
</tr>
<tr>
<td class="address-1"><span id="52062"></span>CB5E</td>
<td class="instruction">CALL <a href="52124.html">$CB9C</a></td>
<td class="comment-1" rowspan="1">Check if ENTER or FIRE was pressed.</td>
</tr>
<tr>
<td class="address-1"><span id="52065"></span>CB61</td>
<td class="instruction">JP NZ,$CAB4</td>
<td class="comment-1" rowspan="1">Jump back if it it wasn't.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="52068"></span>
<div class="comments">
<div class="paragraph">
ENTER or FIRE was pressed. Time to start the game.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="52068"></span>CB64</td>
<td class="instruction">LD HL,$DA8A</td>
<td class="comment-1" rowspan="2">Stop the tune playing (<a href="55946.html">DA8A</a>).</td>
</tr>
<tr>
<td class="address-1"><span id="52071"></span>CB67</td>
<td class="instruction">RES 0,(HL)</td>
</tr>
<tr>
<td class="address-2"><span id="52073"></span>CB69</td>
<td class="instruction">LD IY,$CA53</td>
<td class="comment-1" rowspan="1">Point <span class="register">IY</span> at the laser movement for the intro screen (<a href="51795.html">CA53</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="52077"></span>CB6D</td>
<td class="instruction">CALL <a href="59126.html">$E6F6</a></td>
<td class="comment-1" rowspan="1">Update the laser.</td>
</tr>
<tr>
<td class="address-1"><span id="52080"></span>CB70</td>
<td class="instruction">CALL <a href="55949.html">$DA8D</a></td>
<td class="comment-1" rowspan="1">Play the laser sound effect.</td>
</tr>
<tr>
<td class="address-1"><span id="52083"></span>CB73</td>
<td class="instruction">CALL <a href="56058.html">$DAFA</a></td>
<td class="comment-1" rowspan="1">Pause for one second.</td>
</tr>
<tr>
<td class="address-1"><span id="52086"></span>CB76</td>
<td class="instruction">CALL <a href="60834.html">$EDA2</a></td>
<td class="comment-1" rowspan="1">Rotate the colours for the main message / laser.</td>
</tr>
<tr>
<td class="address-1"><span id="52089"></span>CB79</td>
<td class="instruction">LD IY,$CA43</td>
<td class="comment-1" rowspan="1">Point <span class="register">IY</span> at the moving object data for the intro screen.</td>
</tr>
<tr>
<td class="address-1"><span id="52093"></span>CB7D</td>
<td class="instruction">CALL <a href="58770.html#58783">$E59F</a></td>
<td class="comment-1" rowspan="1">Move all objects.</td>
</tr>
<tr>
<td class="address-1"><span id="52096"></span>CB80</td>
<td class="instruction">LD A,($E6DA)</td>
<td class="comment-1" rowspan="1">Is the current laser colour 0?</td>
</tr>
<tr>
<td class="address-1"><span id="52099"></span>CB83</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="2">If not, loop back to redraw it.</td>
</tr>
<tr>
<td class="address-1"><span id="52100"></span>CB84</td>
<td class="instruction">JR NZ,$CB69</td>
</tr>
<tr>
<td class="address-1"><span id="52102"></span>CB86</td>
<td class="instruction">LD HL,$CA1E</td>
<td class="comment-1" rowspan="3">Print "Good luck" (<a href="51742.html">CA1E</a>) on screen and return.</td>
</tr>
<tr>
<td class="address-1"><span id="52105"></span>CB89</td>
<td class="instruction">CALL <a href="56800.html">$DDE0</a></td>
</tr>
<tr>
<td class="address-1"><span id="52108"></span>CB8C</td>
<td class="instruction">RET</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="51802.html">CA5A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#51803">Map</a></td>
<td class="next">
Next: <a href="52109.html">CB8D</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">Copyright Rod Bowkett / Mirrorsoft 1985. This dissassembly by Ritchie Swann 2019-2023.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
</footer>
</body>
</html>